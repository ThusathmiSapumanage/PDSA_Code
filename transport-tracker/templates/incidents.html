{% extends "_layout.html" %}
{% block content %}
<h4 class="mb-3"><i class="bi bi-exclamation-triangle"></i> Incidents â€” Route {{ route_id }}</h4>

<div class="card shadow-sm">
  <div class="table-responsive">
    <table class="table align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th>Time</th>
          <th>Type</th>
          <th>Severity</th>
          <th>Vehicle</th>
          <th>Stop</th>
          <th>Message</th>
        </tr>
      </thead>
      <tbody>
        {% if items %}
        {% for r in items %}
        <tr>
          <td>{{ (r.timestampEpoch or 0) | int | datetime }}</td>
          <td><span class="badge text-bg-warning text-dark">{{ r.type }}</span></td>
          <td><span class="badge text-bg-danger">{{ r.severity }}</span></td>
          <td>{{ r.vehicleId or '-' }}</td>
          <td>{{ r.stop or '-' }}</td>
          <td>{{ r.message }}</td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
          <td colspan="6" class="text-center text-secondary py-4">No incident reports yet.</td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
